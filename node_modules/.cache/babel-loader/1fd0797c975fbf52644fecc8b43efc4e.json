{"ast":null,"code":"var _jsxFileName = \"/Users/gyul/git/B-search-clinical/src/routes/Main/RecommendKeyword/index.tsx\",\n    _s = $RefreshSig$();\n\nimport styles from './RecommendKeyword.module.scss';\nimport { useRef, useState, useCallback, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport useKeywordQuery from 'hooks/useKeywordQuery';\nimport { SearchIcon } from 'assets/svg';\nimport RecommendKeywordItem from './RecommendKeywordItem';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RecommendKeyword = _ref => {\n  _s();\n\n  let {\n    setInputValue\n  } = _ref;\n  const {\n    keyword\n  } = useSelector(state => state.search);\n  const {\n    data\n  } = useKeywordQuery(keyword);\n  const [autoFrame, setAutoFrame] = useState(-1);\n  const autoFrameRef = useRef([]);\n\n  const focusHandler = e => {\n    setInputValue(e.currentTarget.value);\n  };\n\n  const keyEvent = useCallback(e => {\n    if (e.isComposing === true) return;\n    const size = autoFrameRef.current.length;\n\n    switch (e.key) {\n      case 'ArrowUp':\n        e.preventDefault();\n        setAutoFrame(prev => prev > 0 ? prev - 1 : size - 1);\n        break;\n\n      case 'ArrowDown':\n      case 'Tab':\n        e.preventDefault();\n        setAutoFrame(prev => prev < size - 1 ? prev + 1 : 0);\n    }\n  }, [autoFrameRef]);\n  useEffect(() => {\n    setAutoFrame(-1);\n  }, [keyword]);\n  useEffect(() => {\n    var _autoFrameRef$current;\n\n    (_autoFrameRef$current = autoFrameRef.current[autoFrame]) === null || _autoFrameRef$current === void 0 ? void 0 : _autoFrameRef$current.focus();\n  }, [autoFrame]);\n  useEffect(() => {\n    window.addEventListener('keydown', keyEvent);\n    return () => window.removeEventListener('keydown', keyEvent);\n  }, [keyEvent]);\n\n  if (!keyword || !data) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\uAC80\\uC0C9\\uC5B4\\uB97C \\uC785\\uB825\\uC911 \\uC785\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 12\n    }, this);\n  }\n\n  if (data.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\uAC80\\uC0C9 \\uACB0\\uACFC\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    children: data.map((item, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n      tabIndex: i,\n      className: styles.selected,\n      children: [/*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onFocus: focusHandler,\n        ref: el => {\n          autoFrameRef.current[i] = el;\n        },\n        type: \"button\",\n        value: item.sickNm,\n        children: /*#__PURE__*/_jsxDEV(RecommendKeywordItem, {\n          keyword: keyword,\n          sickNm: item.sickNm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this)]\n    }, item.sickCd, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RecommendKeyword, \"5wPb0Ds2RvwqfG7yZQ1GkHbNc1o=\", false, function () {\n  return [useSelector, useKeywordQuery];\n});\n\n_c = RecommendKeyword;\nexport default RecommendKeyword;\n\nvar _c;\n\n$RefreshReg$(_c, \"RecommendKeyword\");","map":{"version":3,"names":["styles","useRef","useState","useCallback","useEffect","useSelector","useKeywordQuery","SearchIcon","RecommendKeywordItem","RecommendKeyword","setInputValue","keyword","state","search","data","autoFrame","setAutoFrame","autoFrameRef","focusHandler","e","currentTarget","value","keyEvent","isComposing","size","current","length","key","preventDefault","prev","focus","window","addEventListener","removeEventListener","map","item","i","selected","el","sickNm","sickCd"],"sources":["/Users/gyul/git/B-search-clinical/src/routes/Main/RecommendKeyword/index.tsx"],"sourcesContent":["import styles from './RecommendKeyword.module.scss'\nimport { Dispatch, SetStateAction, useRef, useState, FocusEvent, useCallback, useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from 'states'\n\nimport useKeywordQuery from 'hooks/useKeywordQuery'\n\nimport { SearchIcon } from 'assets/svg'\nimport RecommendKeywordItem from './RecommendKeywordItem'\n\ninterface IProps {\n  setInputValue: Dispatch<SetStateAction<string>>\n}\n\nconst RecommendKeyword = ({ setInputValue }: IProps) => {\n  const { keyword } = useSelector((state: RootState) => state.search)\n  const { data } = useKeywordQuery(keyword)\n\n  const [autoFrame, setAutoFrame] = useState(-1)\n  const autoFrameRef = useRef<HTMLButtonElement[] | null[]>([])\n\n  const focusHandler = (e: FocusEvent<HTMLButtonElement>) => {\n    setInputValue(e.currentTarget.value)\n  }\n\n  const keyEvent = useCallback(\n    (e: globalThis.KeyboardEvent) => {\n      if (e.isComposing === true) return\n\n      const size = autoFrameRef.current.length\n      switch (e.key) {\n        case 'ArrowUp':\n          e.preventDefault()\n          setAutoFrame((prev) => (prev > 0 ? prev - 1 : size - 1))\n          break\n        case 'ArrowDown':\n        case 'Tab':\n          e.preventDefault()\n          setAutoFrame((prev) => (prev < size - 1 ? prev + 1 : 0))\n      }\n    },\n    [autoFrameRef]\n  )\n\n  useEffect(() => {\n    setAutoFrame(-1)\n  }, [keyword])\n\n  useEffect(() => {\n    autoFrameRef.current[autoFrame]?.focus()\n  }, [autoFrame])\n\n  useEffect(() => {\n    window.addEventListener('keydown', keyEvent)\n\n    return () => window.removeEventListener('keydown', keyEvent)\n  }, [keyEvent])\n\n  if (!keyword || !data) {\n    return <p>검색어를 입력중 입니다.</p>\n  }\n\n  if (data.length === 0) {\n    return <p>검색 결과가 없습니다.</p>\n  }\n\n  return (\n    <ul>\n      {data.map((item, i) => (\n        <li tabIndex={i} className={styles.selected} key={item.sickCd}>\n          <SearchIcon />\n          <button\n            onFocus={focusHandler}\n            ref={(el) => {\n              autoFrameRef.current[i] = el\n            }}\n            type='button'\n            value={item.sickNm}\n          >\n            <RecommendKeywordItem keyword={keyword} sickNm={item.sickNm} />\n          </button>\n        </li>\n      ))}\n    </ul>\n  )\n}\n\nexport default RecommendKeyword\n"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,gCAAnB;AACA,SAAmCC,MAAnC,EAA2CC,QAA3C,EAAiEC,WAAjE,EAA8EC,SAA9E,QAA+F,OAA/F;AACA,SAASC,WAAT,QAA4B,aAA5B;AAGA,OAAOC,eAAP,MAA4B,uBAA5B;AAEA,SAASC,UAAT,QAA2B,YAA3B;AACA,OAAOC,oBAAP,MAAiC,wBAAjC;;;AAMA,MAAMC,gBAAgB,GAAG,QAA+B;EAAA;;EAAA,IAA9B;IAAEC;EAAF,CAA8B;EACtD,MAAM;IAAEC;EAAF,IAAcN,WAAW,CAAEO,KAAD,IAAsBA,KAAK,CAACC,MAA7B,CAA/B;EACA,MAAM;IAAEC;EAAF,IAAWR,eAAe,CAACK,OAAD,CAAhC;EAEA,MAAM,CAACI,SAAD,EAAYC,YAAZ,IAA4Bd,QAAQ,CAAC,CAAC,CAAF,CAA1C;EACA,MAAMe,YAAY,GAAGhB,MAAM,CAA+B,EAA/B,CAA3B;;EAEA,MAAMiB,YAAY,GAAIC,CAAD,IAAsC;IACzDT,aAAa,CAACS,CAAC,CAACC,aAAF,CAAgBC,KAAjB,CAAb;EACD,CAFD;;EAIA,MAAMC,QAAQ,GAAGnB,WAAW,CACzBgB,CAAD,IAAiC;IAC/B,IAAIA,CAAC,CAACI,WAAF,KAAkB,IAAtB,EAA4B;IAE5B,MAAMC,IAAI,GAAGP,YAAY,CAACQ,OAAb,CAAqBC,MAAlC;;IACA,QAAQP,CAAC,CAACQ,GAAV;MACE,KAAK,SAAL;QACER,CAAC,CAACS,cAAF;QACAZ,YAAY,CAAEa,IAAD,IAAWA,IAAI,GAAG,CAAP,GAAWA,IAAI,GAAG,CAAlB,GAAsBL,IAAI,GAAG,CAAzC,CAAZ;QACA;;MACF,KAAK,WAAL;MACA,KAAK,KAAL;QACEL,CAAC,CAACS,cAAF;QACAZ,YAAY,CAAEa,IAAD,IAAWA,IAAI,GAAGL,IAAI,GAAG,CAAd,GAAkBK,IAAI,GAAG,CAAzB,GAA6B,CAAzC,CAAZ;IARJ;EAUD,CAfyB,EAgB1B,CAACZ,YAAD,CAhB0B,CAA5B;EAmBAb,SAAS,CAAC,MAAM;IACdY,YAAY,CAAC,CAAC,CAAF,CAAZ;EACD,CAFQ,EAEN,CAACL,OAAD,CAFM,CAAT;EAIAP,SAAS,CAAC,MAAM;IAAA;;IACd,yBAAAa,YAAY,CAACQ,OAAb,CAAqBV,SAArB,iFAAiCe,KAAjC;EACD,CAFQ,EAEN,CAACf,SAAD,CAFM,CAAT;EAIAX,SAAS,CAAC,MAAM;IACd2B,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCV,QAAnC;IAEA,OAAO,MAAMS,MAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCX,QAAtC,CAAb;EACD,CAJQ,EAIN,CAACA,QAAD,CAJM,CAAT;;EAMA,IAAI,CAACX,OAAD,IAAY,CAACG,IAAjB,EAAuB;IACrB,oBAAO;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAP;EACD;;EAED,IAAIA,IAAI,CAACY,MAAL,KAAgB,CAApB,EAAuB;IACrB,oBAAO;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAP;EACD;;EAED,oBACE;IAAA,UACGZ,IAAI,CAACoB,GAAL,CAAS,CAACC,IAAD,EAAOC,CAAP,kBACR;MAAI,QAAQ,EAAEA,CAAd;MAAiB,SAAS,EAAEpC,MAAM,CAACqC,QAAnC;MAAA,wBACE,QAAC,UAAD;QAAA;QAAA;QAAA;MAAA,QADF,eAEE;QACE,OAAO,EAAEnB,YADX;QAEE,GAAG,EAAGoB,EAAD,IAAQ;UACXrB,YAAY,CAACQ,OAAb,CAAqBW,CAArB,IAA0BE,EAA1B;QACD,CAJH;QAKE,IAAI,EAAC,QALP;QAME,KAAK,EAAEH,IAAI,CAACI,MANd;QAAA,uBAQE,QAAC,oBAAD;UAAsB,OAAO,EAAE5B,OAA/B;UAAwC,MAAM,EAAEwB,IAAI,CAACI;QAArD;UAAA;UAAA;UAAA;QAAA;MARF;QAAA;QAAA;QAAA;MAAA,QAFF;IAAA,GAAkDJ,IAAI,CAACK,MAAvD;MAAA;MAAA;MAAA;IAAA,QADD;EADH;IAAA;IAAA;IAAA;EAAA,QADF;AAmBD,CAvED;;GAAM/B,gB;UACgBJ,W,EACHC,e;;;KAFbG,gB;AAyEN,eAAeA,gBAAf"},"metadata":{},"sourceType":"module"}